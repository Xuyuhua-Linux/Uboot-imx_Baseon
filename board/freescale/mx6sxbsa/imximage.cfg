/*
 * Copyright (C) 2016 NXP Semiconductors, Inc.
 *
 * SPDX-License-Identifier:	GPL-2.0+
 *
 * Refer docs/README.imxmage for more details about how-to configure
 * and create imximage boot image
 *
 * The syntax is taken as close as possible with the kwbimage
 */

#define __ASSEMBLY__
#include <config.h>

/* image version */

IMAGE_VERSION 2

/*
 * Boot Device : one of
 * spi/sd/nand/onenand, qspi/nor
 */

#ifdef CONFIG_SYS_BOOT_QSPI
BOOT_FROM	qspi
#elif defined(CONFIG_SYS_BOOT_EIMNOR)
BOOT_FROM	nor
#else
BOOT_FROM	sd
#endif

#ifdef CONFIG_USE_PLUGIN
/*PLUGIN    plugin-binary-file    IRAM_FREE_START_ADDR*/
PLUGIN	board/freescale/mx6sxbsa/plugin.bin 0x00907000
#else

#ifdef CONFIG_SECURE_BOOT
CSF CONFIG_CSF_SIZE
#endif

/*
 * Device Configuration Data (DCD)
 *
 * Each entry must have the format:
 * Addr-type           Address        Value
 *
 * where:
 *	Addr-type register length (1,2 or 4 bytes)
 *	Address	  absolute address of the register
 *	value	  value to be stored in the register
 */

/* Enable all clocks */
DATA 4 0x020C4068 0xFFFFFFFF
DATA 4 0x020C406C 0xFFFFFFFF
DATA 4 0x020C4070 0xFFFFFFFF
DATA 4 0x020C4074 0xFFFFFFFF
DATA 4 0x020C4078 0xFFFFFFFF
DATA 4 0x020C407C 0xFFFFFFFF
DATA 4 0x020C4080 0xFFFFFFFF

/* IOMUX */
/* DDR IO TYPE */
DATA 4 0x020E0618 0x000C0000
DATA 4 0x020E05FC 0x00000000

/* CLOCK */
DATA 4 0x020E032C 0x00000030
/*
DATA 4 0x020C4018 0x00260324	//DDR clk to 400MHz
*/

/* ADDRESS */
DATA 4 0x020E0300 0x00000030
DATA 4 0x020E02FC 0x00000030
DATA 4 0x020E05F4 0x00000030

/* CONTROL */
DATA 4 0x020E0340 0x00000030

DATA 4 0x020E0320 0x00000000
DATA 4 0x020E0310 0x00000030
DATA 4 0x020E0314 0x00000030
DATA 4 0x020E0614 0x00000030

/* DATA STROBE */
DATA 4 0x020E05F8 0x00020000
DATA 4 0x020E0330 0x00000030
DATA 4 0x020E0334 0x00000030
DATA 4 0x020E0338 0x00000030
DATA 4 0x020E033C 0x00000030

/* DATA */
DATA 4 0x020E0608 0x00020000
DATA 4 0x020E060C 0x00000030
DATA 4 0x020E0610 0x00000030
DATA 4 0x020E061C 0x00000030
DATA 4 0x020E0620 0x00000030
DATA 4 0x020E02EC 0x00000030
DATA 4 0x020E02F0 0x00000030
DATA 4 0x020E02F4 0x00000030
DATA 4 0x020E02F8 0x00000030

/* Calibrations */
/* ZQ */
DATA 4 0x021B0800 0xA1390003
/* write leveling */
DATA 4 0x021B080C 0x0029002A
DATA 4 0x021B0810 0x001F001F

/* DQS Read Gate */
DATA 4 0x021B083C 0x41400140
DATA 4 0x021B0840 0x00000000

/* Read/Write Delay */
DATA 4 0x021B0848 0x40403E40
DATA 4 0x021B0850 0x40403A32

DATA 4 0x021B08C0 0x2492244A

/* read data bit delay */
DATA 4 0x021B081C 0x33333333
DATA 4 0x021B0820 0x33333333
DATA 4 0x021B0824 0x33333333
DATA 4 0x021B0828 0x33333333

/* Complete calibration by forced measurment */
DATA 4 0x021B08B8 0x00000800

/* MMDC init */
/* in DDR3, 64-bit mode, only MMDC0 is initiated */
DATA 4 0x021B0004 0x0002002D
DATA 4 0x021B0008 0x1B333030
DATA 4 0x021B000C 0x2B2F52F3
DATA 4 0x021B0010 0xB68E0B63
DATA 4 0x021B0014 0x01FF00DB
DATA 4 0x021B0018 0x00011740
DATA 4 0x021B001C 0x00008000
DATA 4 0x021B002C 0x000026D2
DATA 4 0x021B0030 0x002F1023
DATA 4 0x021B0040 0x00000043
DATA 4 0x021B0000 0x82180000

/* Initialize CS0: MT41K64M16TW-107AA */
/* MR2 */
DATA 4 0x021B001C 0x04008032
/* MR3 */
DATA 4 0x021B001C 0x00008033
/* MR1 */
DATA 4 0x021B001C 0x00068031
/* MR0 */
DATA 4 0x021B001C 0x05208030
/* DDR device ZQ calibration */
DATA 4 0x021B001C 0x04008040

/* Initialize CS1: NOT USED */
/*
DATA 4 0x021B001C 0x0400803A
DATA 4 0x021B001C 0x0000803B
DATA 4 0x021B001C 0x00068039
DATA 4 0x021B001C 0x05208038
DATA 4 0x021B001C 0x04008048
*/

/* final DDR setup, before operation start */
DATA 4 0x021B0020 0x00000800
DATA 4 0x021B0818 0x00022227
DATA 4 0x021B0004 0x0002556D
DATA 4 0x021B0404 0x00011006
DATA 4 0x021B001C 0x0000000

#endif
